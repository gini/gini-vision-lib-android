// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:2.3.3'
        classpath 'com.dicedmelon.gradle:jacoco-android:0.1.1'

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

allprojects {
    repositories {
        jcenter()
        maven {
            // For Commons Imaging
            url 'https://repo.gini.net/nexus/content/repositories/open'
        }
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}

apply from: rootProject.file('gradle/git_utils.gradle')

ext {
    compileSdkVersion = 25
    buildToolsVersion = "25.0.2"
    minSdkVersion = 14
    targetSdkVersion = 25
    versionCode = gitCommitsCount()
    versionName = "${version} (${gitCommitsCount()})"
}

ext.deps = [
        // Android
        appCompatv7: 'com.android.support:appcompat-v7:25.3.0',
        supportv4: 'com.android.support:support-v4:25.3.0',
        supportv13: 'com.android.support:support-v13:25.3.0',
        supportDesign: 'com.android.support:design:25.3.0',
        // Exif editing library. IMPORTANT: notify backend when the version is changed
        commonsImaging: 'org.apache.commons:commons-imaging:1.0.0gini',
        // Logging
        slf4j: 'org.slf4j:slf4j-api:1.7.21',
        // Backport/standalone version of CompletableFuture
        completableFuture: 'org.glassfish.jersey.bundles.repackaged:jersey-jsr166e:2.23.1',
        // Test dependencies
        junit: 'junit:junit:4.12',
        truth: 'com.google.truth:truth:0.28',
        mockito: 'org.mockito:mockito-core:1.10.19',
        supportTestRunner: 'com.android.support.test:runner:0.5',
        supportTestRules: 'com.android.support.test:rules:0.5',
        supportTestEspressoCore: 'com.android.support.test.espresso:espresso-core:2.2.2',
        supportTestEspressoIntents: 'com.android.support.test.espresso:espresso-intents:2.2.2',
        supportTestUiAutomator: 'com.android.support.test.uiautomator:uiautomator-v18:2.1.2',
        dexmaker: 'com.crittercism.dexmaker:dexmaker:1.4',
        dexmakerDx: 'com.crittercism.dexmaker:dexmaker-dx:1.4',
        dexmakerMockito: 'com.crittercism.dexmaker:dexmaker-mockito:1.4',
        supportMultidex: 'com.android.support:multidex:1.0.0',
]
